<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>controle</title>
   
 <link rel="stylesheet" href="opcao2.css">
</head>
<body>
    <header>
        <h4>.</h4>
        <h5>  SimpleTech </h5>
      
        <div id="divb">
          <span class="material-symbols-outlined" id="burger">☰</span>
          <div class="menu" id="menu">

            <div class="duvida" onclick="window.location.href = 'inicio.html';">
              <p id="pagina">Pagina inicial</p>
          </div>
          
           <div class="duvidas" onclick="window.location.href = 'tutorial.html'">
             <p> como usar o SIMPLE ATM </p>
            </div>
            <div class="duvidas" onclick="window.location.href='index.html'">
              <P> Ir para o caixa eletrônico</P>
            </div>
         <div class="duvidas" onclick="window.location.href='sobrenos.html'">
          <p> Sobre nos </p>
         </div>
     
          <div class="duvidas" onclick="window.location.href='faq.html'">
            <p >FAQ</p>
          </div>
          </div>
      
        </div>
        <div id="logo">
        
        </div>
      
      </header>

 <div id="cima">
    <div id="MINICAIXA">
        <h6>
            SIMPLE ATM
        </h6>
    </div>
    
 </div>

 <div id="caixa">
    <button id="b1" type="button" class="botao"></button>
    <div>
        <button id="b2" type="button" class="botao"></button>
    </div>
    <div>
        <button id="b3" type="button" class="botao"  onclick="window.location.href='sacar.html'"></button>

    <div>
        <button id="b4" type="button" class="botao"></button>
    </div>
    
    <div id="bb5">
        <button id="b5" type="button"  class="botao"></button>
    </div>
    <div>
        <button id="b6" type="button"  class="botao"></button>
    </div>
    <div>
        <button id="b7" type="button" class="botao"  onclick="window.location.href='sacar.html'"></button>
    </div>
    <div>
        <button id="b8" type="button" class="botao" onclick="window.location.href='depoisto.html'"></button>
    </div>
    <div id="re"></div>


    </div>
 </div>

 <div id="tela">
    <p id="me"> Bem-vindo à sua conta Cauã </p>
    <p id="me"> Escolha uma opção para poder prosseguir </p><br>

    <div id="sacar">
        <p class="sacar"> SACAR</p>
    </div>
    <div id="depositar">
        <p class="depositar"> DEPOSITAR</p>
    </div>
    <div id="saldo">
        <p class="saldo"> SALDO</p>
    </div>
    <div id="transferencia">
        <p class="transferencia"> TRANSFERÊNCIA</p>
    </div>
    <div id="trar">
        <button id="entrar" type="button" class="botao" >ENTRAR
            <div id="cor"></div>
        </button>
    </div>
    <p id="mensagem"></p>
</div>


 <div id="teclado">
    <div>
        <button id="t1" type="button" class="botao">1</button>
    </div>
    <div>
        <button id="t2" type="button" class="botao">4</button>
    </div>
    <div>
        <button id="t3" type="button"  class="botao">7</button>
    </div>
    <div id="tt4">
        <button  id="t4" type="button"  class="botao">2</button>
    </div>
    <div>
        <button id="t5" type="button"  class="botao">5</button>
    </div>
    <div>
        <button id="t6" type="button"  class="botao">8</button>
    </div>
    <div id="tt7">
        <button id="t7" type="button"  class="botao" >3</button>
    </div>
    <div id="tt8">
        <button id="t8" type="button"  class="botao">6</button>
    </div>
    <div>
        <button id="t9" type="button"  class="botao">9</button>
    </div>
    <div id="tt10">
        <button id="t10" type="button"  class="botao"></button>
    </div>
    <div id="tt11">
        <button id="t11" type="button"  class="botao">0</button>
    </div>
    <div id="tt12">
        <button id="t12" type="button"  class="botao">+</button>
    </div>
    <div id="pg">
        <button id="apagar" type="button"  class="botao">APAGAR
            <div id="cor2"></div>
        </button>
    </div>
    <div>
        <button id="cancelar" type="button" class="botao" onclick="window.location.href='index.html'">CANCELAR
            <div id="cor3"></div>
        </button>
    </div>
 </div>
    
</body>
<script>
    document.addEventListener('DOMContentLoaded', function() {
        const burgerIcon = document.getElementById('burger');
        const menu = document.getElementById('menu');

        burgerIcon.addEventListener('click', function(event) {
            event.stopPropagation();
            toggleMenu();
        });

        document.addEventListener('click', function(event) {
            if (!menu.contains(event.target) && menu.style.display === 'block') {
                menu.style.display = 'none';
            }
        });

        function toggleMenu() {
            if (menu.style.display === 'block') {
                menu.style.display = 'none';
            } else {
                menu.style.display = 'block';
            }
        }

        function changeColor(event, color) {
            var buttons = document.getElementsByClassName('botao');
            for (var i = 0; i < buttons.length; i++) {
                buttons[i].style.backgroundColor = '';
            }
           
        }

        var buttons = document.getElementsByClassName('botao');
        for (var i = 0; i < buttons.length; i++) {
            buttons[i].addEventListener('click', function(event) {
           
            });
        }

        const entrarButton = document.getElementById('entrar');
    const numeroContaInput = document.getElementById('numeroConta');
    const mensagemElement = document.getElementById('mensagem');
    

    entrarButton.addEventListener('click', function() {
        let numeroContaDigitado = numeroContaInput.value;

        fetch(`/api/verificar-conta?numeroConta=${numeroContaDigitado}`)
            .then(response => response.text())
            .then(data => {
                if (data === "Conta válida") {
                    console.log("Conta válida");
                    // Redirecionar para outra página
                    window.location.href = "opcoes.html";
                } else {
                    console.log('%cEsta é uma mensagem de console estilizada', 'color: white; font-size: 20px;');

                    alert( " se fudeu ");

                    // Exibir mensagem de erro para o usuário
                    mensagemElement.innerText = "Número da conta inválido";
                }
            })
            .catch(error => {
                console.error("Erro ao verificar a conta:", error);
            });
    });
});
const express = require('express');
const app = express();

// Middleware para analisar requisições com dados JSON
app.use(express.json());

// Variável para contar o número de tentativas de senha incorreta
let tentativasSenha = 0;

// Endpoint para realizar saque e verificar a senha
app.post('/api/saque', (req, res) => {
    // Extrai as informações da requisição
    const { saque, senha, conta } = req.body;

    // Verifica se o número de tentativas de senha incorreta é menor que 3
    if (tentativasSenha < 3) {
        // Verifica se a senha fornecida é correta
        if (conta.senha === senha) {
            // Verifica se o saque é possível com o saldo disponível
            if (saque <= conta.valor) {
                // Realiza o saque e atualiza o saldo da conta
                conta.valor -= saque;
                res.status(200).json({
                    mensagem: 'Saque realizado com sucesso',
                    novoSaldo: conta.valor
                });
            } else {
                res.status(400).json({
                    mensagem: 'Saldo insuficiente'
                });
            }
        } else {
            // Senha incorreta, incrementa o contador de tentativas de senha
            tentativasSenha++;
            if (tentativasSenha >= 3) {
                res.status(403).json({
                    mensagem: 'Muitas tentativas inválidas. Seu cartão foi bloqueado.'
                });
            } else {
                res.status(401).json({
                    mensagem: 'Senha incorreta'
                });
            }
        }
    } else {
        // Número de tentativas de senha incorreta excedido
        res.status(403).json({
            mensagem: 'Muitas tentativas inválidas. Seu cartão foi bloqueado.'
        });
    }
});

// Porta do servidor
const port = 3000;

// Inicia o servidor
app.listen(port, () => {
    console.log(`Servidor rodando na porta ${port}`);
});

    
</script>


</html>
